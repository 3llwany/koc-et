<ngx-spinner></ngx-spinner>
<div class="row">
  <div class="col-12">
    <div class="content-header">
      {{ "Navbar.EducationalSubjects" | translate }} -
      {{ "labels.Materials" | translate }} -
      {{ "labels.updateAttendanceManually" | translate }}
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <mat-card class="example-card">
      <mat-card-title>
        {{ "labels.updateAttendanceManually" | translate }}
        <a
          mat-raised-button
          class="btn btn-warning bg-light-warning float-right"
          routerLink="/dashboard/educational-setup/subjects/material-search/{{
            subjectId
          }}"
          [queryParams]="{ functionId: functionId }"
        >
          {{ "General.Back" | translate }}
        </a>
      </mat-card-title>
      <mat-card-content>
        <form [formGroup]="myForm" class="form-container">
          <div class="row f-w">
            <div class="col-md-6 col-12">
              <mat-form-field appearance="legacy">
                <mat-label>{{ "labels.Name" | translate }}</mat-label>
                <input matInput type="text" formControlName="studentName" />
              </mat-form-field>
            </div>

            <div class="col-md-6 col-12">
              <mat-form-field appearance="legacy">
                <mat-label>{{ "labels.Email" | translate }}</mat-label>
                <input matInput type="text" formControlName="studentEmail" />
              </mat-form-field>
            </div>

            <div class="col-md-6 col-12">
              <mat-form-field appearance="legacy">
                <mat-label>{{ "labels.Mobile" | translate }}</mat-label>
                <input matInput type="text" formControlName="studentMobile" />
              </mat-form-field>
            </div>

            <div class="col-md-6 col-12">
              <mat-form-field appearance="legacy">
                <mat-label>{{ "labels.Code" | translate }}</mat-label>
                <input matInput type="text" formControlName="studentCode" />
              </mat-form-field>
            </div>

            <div class="col-md-8 col-6" *ngIf="studentSearched != null">
              <mat-radio-group formControlName="attendBool" class="row">
                <div class="col-md-3 col-12">
                  <mat-radio-button [value]="true">
                    {{ "labels.Attended" | translate }}
                  </mat-radio-button>
                </div>
                <div class="col-md-3 col-12">
                  <mat-radio-button [value]="false">
                    {{ "labels.NotAttended" | translate }}
                  </mat-radio-button>
                </div>
              </mat-radio-group>
            </div>
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions align="end">
        <button
          *ngIf="studentSearched != null"
          mat-raised-button
          class="btn btn-primary"
          (click)="resetForm()"
        >
          {{ "General.Reset" | translate }}
        </button>
        <button
          *ngIf="studentSearched == null"
          mat-raised-button
          class="btn btn-primary"
          (click)="searchAttendanceManual()"
        >
          {{ "General.Search" | translate }}
        </button>
        <button
          *ngIf="studentSearched != null"
          mat-raised-button
          class="btn btn-primary"
          (click)="updateAttendanceManual()"
        >
          {{ "General.Save" | translate }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

<div class="row" *ngIf="studentSearched != null">
  <div class="col-12">
    <mat-card class="example-card">
      <table class="table table-striped m-0">
        <thead>
          <tr>
            <th>
              {{ "labels.Name" | translate }}
            </th>
            <th>{{ "labels.LectureName" | translate }}</th>
            <th>{{ "labels.Group" | translate }}</th>
            <th>{{ "labels.Attendance" | translate }}</th>
            <th>{{ "labels.Exception" | translate }}</th>
            <th>{{ "labels.refundBalance" | translate }}</th>
            <th>{{ "Balance.Amount" | translate }}</th>
            <th>{{ "labels.Date" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ studentSearched.username }}</td>
            <td>{{ studentSearched.lectureName }}</td>
            <td>{{ studentSearched.groupName }}</td>
            <td>{{ studentSearched.didAttend }}</td>
            <td>{{ studentSearched.isException }}</td>
            <td>{{ studentSearched.didRefund }}</td>
            <td>{{ studentSearched.amountRefunded }}</td>
            <td>{{ studentSearched.dateRefunded }}</td>
          </tr>
        </tbody>
      </table>
    </mat-card>
  </div>
</div>
