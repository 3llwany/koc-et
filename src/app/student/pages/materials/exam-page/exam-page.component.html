<section id="icons-buttons">
  <div class="row">
    <!-- Start Exam Header -->
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title questcolor">
            {{ "labels.ExamNm" | translate }}: {{ ExamName }}
          </h4>
        </div>
        <div class="card-content">
          <div class="card-body" style="padding: 7px">
            <div class="row">
              <!-- <div class="col-2"></div>
              <div class="col-8">
                <button
                  type="button"
                  class="btn btn-outline-secondary mr-1 mb-2"
                >
                  <i class="fa fa-angle-double-left"></i>
                </button>

                <button
                  type="button"
                  class="btn btn-outline-secondary mr-1 mb-2"
                >
                  <i class="fa fa-angle-left"></i>
                </button>
                <button
                  type="button"
                  class="btn btn-outline-secondary mr-1 mb-2"
                >
                  <i class="fa fa-angle-right"></i>
                </button>
                <button
                  type="button"
                  class="btn btn-outline-secondary mr-1 mb-2"
                >
                  <i class="fa fa-angle-double-right"></i>
                </button>
              </div> -->

              <div class="col-2" *ngIf="!isSolved">
                {{ "labels.TotalMark" | translate }} : {{ examTotalMark }}
              </div>

              <div class="col-2" *ngIf="!isSolved">
                {{ "labels.ExamStartTime" | translate }}: {{ ExamStarTime }}
              </div>

              <div class="col-2" *ngIf="exam_period_minute != 0">
                {{ "labels.ExamTime" | translate }}: {{ counter | Timer }}
              </div>

              <ng-container *ngIf="isSolved">
                <div class="col-2">
                  {{ "labels.StudentMark" | translate }}: ({{ studentMark }} /
                  {{ examTotalMark }})
                </div>
                <!--
                <div class="col-2">
                  {{ "labels.PointsGained" | translate }}: {{ PointsGained }}
                </div> -->
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question By Button -->
    <div class="col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body btn-cont" style="padding: 7px">
            <div class="row">
              <div class="col-2"></div>
              <div class="col-8">
                <button
                  *ngFor="let group of ExamGroups; let groupIndex = index"
                  type="button"
                  class="btn btn-secondary bg-light-secondary mr-1 mb-2 questionBtn"
                  (click)="onSelectGroup(group.GroupId)"
                  [class.active]="group.GroupId === currentGroupId"
                >
                  {{ groupIndex + 1 }}
                </button>
              </div>
              <div class="col-2"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Start get question text  and student answer  -->
    <div class="col-12">
      <div class="card overflow-hidden">
        <div class="card-header">
          <h4 class="card-title questcolor">Question</h4>
        </div>
        <div class="card-content">
          <div class="card-body">
            <ng-container
              *ngFor="let group of ExamGroups; let groupIndex = index"
            >
              <ng-container *ngIf="group.GroupId === currentGroupId">
                <ng-container
                  *ngFor="let head of group.Heads; let headIndex = index"
                >
                  <ng-container
                    *ngFor="
                      let Question of head?.Questions;
                      let question = index
                    "
                  >
                    <h4 class="card-title questcolor">
                      {{ group.GroupName }} - {{ head.HeadName }}
                    </h4>
                    <div class="table-responsive">
                      <table class="table table-bordered quest">
                        <thead>
                          <tr>
                            <th scope="col">Ser</th>
                            <th scope="col">English</th>
                            <th scope="col">Arabic</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">{{ question + 1 }}</th>
                            <td>
                              {{ Question.QuestionDetails?.questionText }}
                            </td>
                            <td>
                              {{ Question.QuestionDetails?.questionText }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <ng-container *ngIf="!isSolved">
                      <div class="form-group row align-items-center">
                        <div class="col-3">
                          <label
                            for="last-name"
                            class="col-form-label questcolor"
                          >
                            Type in the correct answer
                          </label>
                        </div>
                        <div class="col-9">
                          <input
                            #answer
                            (keyup)="onRadioChange(answer.value, Question)"
                            type="number"
                            class="form-control student-answer-input"
                            placeholder="correct answer"
                          />
                        </div>
                      </div>

                      <div class="form-group row align-items-center">
                        <button
                          class="float-right"
                          *ngIf="
                            (!isSolved &&
                              Question.QuestionDetails.StudentChoice == null) ||
                            (!isSolved &&
                              Question.QuestionDetails.StudentChoice != null &&
                              Question.QuestionDetails.StudentChoice.RESULT ==
                                'F')
                          "
                          id="btn-{{ Question.QuestionDetails.questionId }}"
                          [disabled]="
                            !isSolved &&
                            Question.QuestionDetails.StudentChoice != null &&
                            Question.QuestionDetails.StudentChoice.RESULT == 'T'
                          "
                          class="btn btn-primary"
                          type="button"
                          id="btn-{{ Question.QuestionDetails.questionId }}"
                          (click)="
                            SingleQuestionForm(
                              Question.QuestionDetails?.questionId
                            )
                          "
                        >
                          {{ "General.SaveQuestion" | translate }}
                        </button>
                      </div>

                      <span
                        *ngIf="
                          (!isSolved &&
                            Question.QuestionDetails.StudentChoice == null) ||
                          (!isSolved &&
                            Question.QuestionDetails.StudentChoice != null &&
                            Question.QuestionDetails.StudentChoice.RESULT ==
                              'F')
                        "
                        class="danger"
                        id="alert-{{ Question.QuestionDetails.questionId }}"
                      >
                        {{ "labels.ansWillNotSave" | translate }}
                      </span>

                      <span
                        *ngIf="
                          !isSolved &&
                          Question.QuestionDetails.StudentChoice != null &&
                          Question.QuestionDetails.StudentChoice.RESULT == 'T'
                        "
                        class="success"
                      >
                        تم حفظ الإجابة من قبل
                      </span>
                      <span
                        *ngIf="
                          (!isSolved &&
                            Question.QuestionDetails.StudentChoice == null) ||
                          (!isSolved &&
                            Question.QuestionDetails.StudentChoice != null &&
                            Question.QuestionDetails.StudentChoice.RESULT ==
                              'F')
                        "
                        id="stu-cho-{{ Question.QuestionDetails.questionId }}"
                        class="warning"
                      >
                      </span>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </ng-container>
            </ng-container>

            <!-- <div class="form-group row align-items-center">
              <div class="col-3">
                <label for="last-name" class="col-form-label questcolor"
                  >Type in the correct answer</label
                >
              </div>
              <div class="col-9">
                <input
                  type="text"
                  id="last-name"
                  class="form-control"
                  name="fname"
                  placeholder="correct answer"
                />
              </div>
            </div> -->
          </div>
        </div>
      </div>
    </div>

    <!-- Start mcq questions Box -->
    <div class="col-12">
      <div class="card overflow-hidden">
        <div class="card-header">
          <h4 class="card-title questcolor">Answers</h4>
        </div>
        <div class="card-content">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered quest">
                <thead>
                  <tr>
                    <th scope="col">Ser</th>
                    <th scope="col">English</th>
                    <th scope="col">Arabic</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container
                    *ngFor="let group of ExamGroups; let groupIndex = index"
                  >
                    <ng-container *ngIf="group.GroupId === currentGroupId">
                      <ng-container
                        *ngFor="let head of group.Heads; let headIndex = index"
                      >
                        <ng-container
                          *ngFor="
                            let Question of head?.Questions;
                            let questionIndex = index
                          "
                        >
                          <tr
                            *ngFor="
                              let mcq of Question.MCQ;
                              let mcqIndex = index
                            "
                          >
                            <th scope="row">{{ mcqIndex + 1 }}</th>
                            <td>
                              {{ mcq.MCQText }}
                            </td>
                            <td>
                              {{ mcq.MCQText }}
                            </td>
                          </tr>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="card-actions">
          <button
            (click)="SubmitExam()"
            id="btnSubmit"
            type="submit"
            class="btn btn-primary"
            *ngIf="!solvidResults"
          >
            {{ "General.SubmitAnswer" | translate }}
          </button>

          <button *ngIf="isSolved" class="btn btn-warning" routerLink="/home">
            {{ "General.BackToHome" | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
